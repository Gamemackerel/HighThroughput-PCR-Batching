<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ExtensionClusterGraph
  
    &mdash; Documentation by YARD 0.9.16
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ExtensionClusterGraph";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo;
    
    
    <span class="title">ExtensionClusterGraph</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ExtensionClusterGraph
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ExtensionClusterGraph</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="ClusterGraphMethods.html" title="ClusterGraphMethods (module)">ClusterGraphMethods</a></span></dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/pcr_batching_representation.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A set of clusters of pcr_operations. the clusters will be made by the
proximity of extension time, so that multiple pcr_operations can be
optimally put into the same pcr reaction if they have similar enough
extension time</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#adjacency_list-instance_method" title="#adjacency_list (instance method)">#<strong>adjacency_list</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute adjacency_list.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#initial_size-instance_method" title="#initial_size (instance method)">#<strong>initial_size</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute initial_size.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute size.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#distance_func-instance_method" title="#distance_func (instance method)">#<strong>distance_func</strong>(cluster_a, cluster_b)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(opts = {})  &#x21d2; ExtensionClusterGraph </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of ExtensionClusterGraph.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#threshhold_func-instance_method" title="#threshhold_func (instance method)">#<strong>threshhold_func</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>decides whether or not further clustering is required.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ClusterGraphMethods.html" title="ClusterGraphMethods (module)">ClusterGraphMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ClusterGraphMethods.html#checkrep-instance_method" title="ClusterGraphMethods#checkrep (method)">#checkrep</a></span>, <span class='object_link'><a href="ClusterGraphMethods.html#cluster_set-instance_method" title="ClusterGraphMethods#cluster_set (method)">#cluster_set</a></span>, <span class='object_link'><a href="ClusterGraphMethods.html#combine_nearest_clusters_lazy-instance_method" title="ClusterGraphMethods#combine_nearest_clusters_lazy (method)">#combine_nearest_clusters_lazy</a></span>, <span class='object_link'><a href="ClusterGraphMethods.html#max_distance-instance_method" title="ClusterGraphMethods#max_distance (method)">#max_distance</a></span>, <span class='object_link'><a href="ClusterGraphMethods.html#perform_clustering-instance_method" title="ClusterGraphMethods#perform_clustering (method)">#perform_clustering</a></span>, <span class='object_link'><a href="ClusterGraphMethods.html#to_s-instance_method" title="ClusterGraphMethods#to_s (method)">#to_s</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(opts = {})  &#x21d2; <tt><span class='object_link'><a href="" title="ExtensionClusterGraph (class)">ExtensionClusterGraph</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of ExtensionClusterGraph</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pcr_batching_representation.rb', line 183</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='ivar'>@pcr_operations</span>               <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:pcr_operations</span><span class='rbracket'>]</span>
    <span class='ivar'>@thermocycler_quantity</span>        <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:thermocycler_quantity</span><span class='rbracket'>]</span>
    <span class='ivar'>@thermocycler_rows</span>            <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:thermocycler_rows</span><span class='rbracket'>]</span>
    <span class='ivar'>@thermocycler_columns</span>         <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:thermocycler_columns</span><span class='rbracket'>]</span>
    <span class='ivar'>@thermocycler_temp_range</span>      <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:thermocycler_temp_range</span><span class='rbracket'>]</span>
    <span class='ivar'>@force_combination_distance</span>   <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:force_combination_distance</span><span class='rbracket'>]</span>
    <span class='ivar'>@prevent_combination_distance</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:prevent_combination_distance</span><span class='rbracket'>]</span>
    <span class='ivar'>@size</span> <span class='op'>=</span> <span class='ivar'>@pcr_operations</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='ivar'>@initial_size</span> <span class='op'>=</span> <span class='ivar'>@size</span> <span class='comment'># initial size recorded for checkrep
</span>

    <span class='id identifier rubyid_singleton_clusters'>singleton_clusters</span> <span class='op'>=</span> <span class='ivar'>@pcr_operations</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_pcr_op'>pcr_op</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="ExtensionCluster.html" title="ExtensionCluster (class)">ExtensionCluster</a></span></span><span class='period'>.</span><span class='id identifier rubyid_singleton_cluster'><span class='object_link'><a href="ExtensionCluster.html#singleton_cluster-class_method" title="ExtensionCluster.singleton_cluster (method)">singleton_cluster</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_pcr_op'>pcr_op</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

    <span class='comment'># final cluster field only stores a cluster if there is only one cluster in the graph (adjacency list cannot represent this state)
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_singleton_clusters'>singleton_clusters</span><span class='period'>.</span><span class='id identifier rubyid_one?'>one?</span>
        <span class='ivar'>@final_cluster</span> <span class='op'>=</span> <span class='id identifier rubyid_singleton_clusters'>singleton_clusters</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> 
    <span class='kw'>else</span>
        <span class='ivar'>@final_cluster</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>

    <span class='comment'># build complete graph (as adjacency matrix) with edges between 
</span>    <span class='comment'># clusters as the absolute difference between those clusters&#39; extension times 
</span>    <span class='id identifier rubyid_initial_graph'>initial_graph</span> <span class='op'>=</span> <span class='id identifier rubyid_build_dissimilarity_matrix'>build_dissimilarity_matrix</span><span class='lparen'>(</span><span class='id identifier rubyid_singleton_clusters'>singleton_clusters</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span> <span class='id identifier rubyid_b'>b</span><span class='op'>|</span> <span class='comment'>#O(n^2)
</span>        <span class='id identifier rubyid_distance_func'>distance_func</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span> 
    <span class='kw'>end</span>

    <span class='ivar'>@adjacency_list</span> <span class='op'>=</span> <span class='id identifier rubyid_build_mst_adjacency_list'>build_mst_adjacency_list</span><span class='lparen'>(</span><span class='id identifier rubyid_initial_graph'>initial_graph</span><span class='comma'>,</span> <span class='id identifier rubyid_singleton_clusters'>singleton_clusters</span><span class='rparen'>)</span>  <span class='comment'>#O(n^2)
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="adjacency_list-instance_method">
  
    #<strong>adjacency_list</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute adjacency_list</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pcr_batching_representation.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_adjacency_list'>adjacency_list</span>
  <span class='ivar'>@adjacency_list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="initial_size-instance_method">
  
    #<strong>initial_size</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute initial_size</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pcr_batching_representation.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initial_size'>initial_size</span>
  <span class='ivar'>@initial_size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="size-instance_method">
  
    #<strong>size</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute size</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pcr_batching_representation.rb', line 181</span>

<span class='kw'>def</span> <span class='id identifier rubyid_size'>size</span>
  <span class='ivar'>@size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="distance_func-instance_method">
  
    #<strong>distance_func</strong>(cluster_a, cluster_b)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215
216
217
218
219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pcr_batching_representation.rb', line 213</span>

<span class='kw'>def</span> <span class='id identifier rubyid_distance_func'>distance_func</span><span class='lparen'>(</span><span class='id identifier rubyid_cluster_a'>cluster_a</span><span class='comma'>,</span> <span class='id identifier rubyid_cluster_b'>cluster_b</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_cluster_a'>cluster_a</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>+</span> <span class='id identifier rubyid_cluster_b'>cluster_b</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='lparen'>(</span><span class='ivar'>@thermocycler_rows</span> <span class='op'>*</span> <span class='ivar'>@thermocycler_columns</span><span class='rparen'>)</span>  \
       <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_cluster_a'>cluster_a</span><span class='period'>.</span><span class='id identifier rubyid_combine_anneal_range_with'>combine_anneal_range_with</span><span class='lparen'>(</span><span class='id identifier rubyid_cluster_b'>cluster_b</span><span class='rparen'>)</span> <span class='op'>&gt;</span> <span class='ivar'>@thermocycler_temp_range</span><span class='rparen'>)</span>
        <span class='comment'># prevent combination of pairs if it would produce an anneal range or batch size that a single thermocycler cannot handle
</span>        <span class='kw'>return</span> <span class='id identifier rubyid_max_distance'>max_distance</span>
    <span class='kw'>else</span>
        <span class='kw'>return</span> <span class='id identifier rubyid_cluster_a'>cluster_a</span><span class='period'>.</span><span class='id identifier rubyid_combine_extension_range_with'>combine_extension_range_with</span><span class='lparen'>(</span><span class='id identifier rubyid_cluster_b'>cluster_b</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="threshhold_func-instance_method">
  
    #<strong>threshhold_func</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>decides whether or not further clustering is required</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>whether clustering has finished</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/pcr_batching_representation.rb', line 226</span>

<span class='kw'>def</span> <span class='id identifier rubyid_threshhold_func'>threshhold_func</span> 
    <span class='kw'>if</span> <span class='ivar'>@adjacency_list</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>  <span class='comment'>#this case is reached when weve combined into only a single cluster
</span>        <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_next_distance'>next_distance</span> <span class='op'>=</span> <span class='ivar'>@adjacency_list</span><span class='period'>.</span><span class='id identifier rubyid_min_priority'>min_priority</span>

    <span class='comment'># End clustering if there are no more clusters to combine, 
</span>    <span class='comment'># or the next combination distance is greater than or equal to 
</span>    <span class='comment'># the specified maximum allowable combination distance. 
</span>    <span class='comment'>#
</span>    <span class='comment'># Impossible combination pairs (with distance Float.MAX) will not exceed
</span>    <span class='comment'># distance specified in @prevent_combination_distance
</span>    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_next_distance'>next_distance</span> <span class='op'>&gt;=</span> <span class='ivar'>@prevent_combination_distance</span><span class='rparen'>)</span>
        <span class='kw'>return</span> <span class='kw'>true</span>
    <span class='kw'>end</span>

    <span class='comment'># If we have already combined enough so that all operations can be 
</span>    <span class='comment'># run at once in the amount of thermocyclers available, 
</span>    <span class='comment'># then we combine only if the next distance is less than or equal to
</span>    <span class='comment'>#  the specified distance for mandatory combination
</span>    <span class='kw'>if</span> <span class='ivar'>@size</span> <span class='op'>&lt;=</span> <span class='ivar'>@thermocycler_quantity</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_next_distance'>next_distance</span> <span class='op'>&lt;=</span> <span class='ivar'>@force_combination_distance</span>
            <span class='kw'>false</span>
        <span class='kw'>else</span>
            <span class='kw'>true</span>
        <span class='kw'>end</span>
    <span class='kw'>else</span>
        <span class='kw'>false</span>
    <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Dec 22 16:44:38 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.16 (ruby-2.3.7).
</div>

    </div>
  </body>
</html>